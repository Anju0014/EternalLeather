

        <!-- Delete Icon -->
        <!-- <div class="ml-auto">
            <i class="fa-solid fa-trash text-red-600 text-2xl cursor-pointer"></i>
        </div>
    </div>
</div> -->

<!-- 
<div class="font-sans max-w-4xl max-md:max-w-xl mx-auto p-4">
    <h1 class="text-2xl font-extrabold text-gray-800">Your Cart</h1>
    <div class="grid md:grid-cols-3 gap-4 mt-8">
        <div class="md:col-span-2 space-y-4">
          
            for(cart.items && cart.items>0)
            <div class="flex gap-4 bg-white px-4 py-6 rounded-md shadow-[0_2px_12px_-3px_rgba(6,81,237,0.3)]">
                <div class="flex gap-4">
                    <div class="w-28 h-28 max-sm:w-24 max-sm:h-24 shrink-0">
                        <img src="" class="w-full h-full object-contain" />
                    </div>
 -->



                  

                        <!-- <div class="mt-auto flex items-center gap-3">
                            <span class="font-normal mr-2"><%=payablePrice%> ,<%=totalPrice%>,<%=totalPriceWithoutDiscount%> </span> -->
        
                            <!-- <div class="flex items-center">  -->
                                <!-- Decrement Button -->
                                <!-- <button id="decrement-btn" class="bg-red-500 text-white w-5 h-5 rounded-full text-center leading-[18px]">-</button>  -->
                                
                                <!-- Quantity Value -->
                                <!-- <div id="qty-value" class="mx-4 text-lg">1</div>  -->
                                
                                <!--Increment Button -->
                                 <!-- <button id="increment-btn" class="bg-red-500 text-white w-5 h-5 rounded-full text-center leading-[18px]">+</button>
                            </div>
                    
                            
                        </div>
                    </div>
                </div>

                <div class="ml-auto flex flex-col">
                    <div class="flex items-start gap-4 justify-end">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 cursor-pointer fill-gray-400 inline-block" viewBox="0 0 64 64">
                            <path d="M45.5 4A18.53 18.53 0 0 0 32 9.86 18.5 18.5 0 0 0 0 22.5C0 40.92 29.71 59 31 59.71a2 2 0 0 0 2.06 0C34.29 59 64 40.92 64 22.5A18.52 18.52 0 0 0 45.5 4ZM32 55.64C26.83 52.34 4 36.92 4 22.5a14.5 14.5 0 0 1 26.36-8.33 2 2 0 0 0 3.27 0A14.5 14.5 0 0 1 60 22.5c0 14.41-22.83 29.83-28 33.14Z" data-original="#000000"></path>
                        </svg>

                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 cursor-pointer fill-gray-400 inline-block" viewBox="0 0 24 24">
                            <path d="M19 7a1 1 0 0 0-1 1v11.191A1.92 1.92 0 0 1 15.99 21H8.01A1.92 1.92 0 0 1 6 19.191V8a1 1 0 0 0-2 0v11.191A3.918 3.918 0 0 0 8.01 23h7.98A3.918 3.918 0 0 0 20 19.191V8a1 1 0 0 0-1-1Zm1-3h-4V2a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2H4a1 1 0 0 0 0 2h16a1 1 0 0 0 0-2ZM10 4V3h4v1Z" data-original="#000000"></path>
                            <path d="M11 17v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Zm4 0v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Z" data-original="#000000"></path>
                        </svg>
                    </div>
                    <h3 class="text-base font-bold text-gray-800 mt-auto"></h3>
                </div> 
            </div> -->

            <!-- <div class="flex gap-4 bg-white px-4 py-6 rounded-md shadow-[0_2px_12px_-3px_rgba(6,81,237,0.3)]">
                <div class="flex gap-4">
                    <div class="w-28 h-28 max-sm:w-24 max-sm:h-24 shrink-0">
                        <img src="" class="w-full h-full object-contain" />
                    </div>

                    
                        <div class="mt-auto flex items-center gap-3">
                            <span class="font-normal mr-2">Qty: </span>
        
                            <div class="flex items-center">  -->
                                <!-- Decrement Button -->
                                <!-- <button id="decrement-btn" class="bg-red-500 text-white w-5 h-5 rounded-full text-center leading-[18px]">-</button> 
                                 -->
                                <!-- Quantity Value -->
                                <!-- <div id="qty-value" class="mx-4 text-lg">1</div>  -->
                                
                                <!--Increment Button -->
                                 <!-- <button id="increment-btn" class="bg-red-500 text-white w-5 h-5 rounded-full text-center leading-[18px]">+</button>
                            </div> -->
                    
                            
                        <!-- </div>
                    </div>
                </div> -->

                <!-- <div class="ml-auto flex flex-col">
                    <div class="flex items-start gap-4 justify-end">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 cursor-pointer fill-gray-400 inline-block" viewBox="0 0 64 64">
                            <path d="M45.5 4A18.53 18.53 0 0 0 32 9.86 18.5 18.5 0 0 0 0 22.5C0 40.92 29.71 59 31 59.71a2 2 0 0 0 2.06 0C34.29 59 64 40.92 64 22.5A18.52 18.52 0 0 0 45.5 4ZM32 55.64C26.83 52.34 4 36.92 4 22.5a14.5 14.5 0 0 1 26.36-8.33 2 2 0 0 0 3.27 0A14.5 14.5 0 0 1 60 22.5c0 14.41-22.83 29.83-28 33.14Z" data-original="#000000"></path>
                        </svg>

                        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 cursor-pointer fill-gray-400 inline-block" viewBox="0 0 24 24">
                            <path d="M19 7a1 1 0 0 0-1 1v11.191A1.92 1.92 0 0 1 15.99 21H8.01A1.92 1.92 0 0 1 6 19.191V8a1 1 0 0 0-2 0v11.191A3.918 3.918 0 0 0 8.01 23h7.98A3.918 3.918 0 0 0 20 19.191V8a1 1 0 0 0-1-1Zm1-3h-4V2a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v2H4a1 1 0 0 0 0 2h16a1 1 0 0 0 0-2ZM10 4V3h4v1Z" data-original="#000000"></path>
                            <path d="M11 17v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Zm4 0v-7a1 1 0 0 0-2 0v7a1 1 0 0 0 2 0Z" data-original="#000000"></path>
                        </svg>
                    </div>
                    <h3 class="text-base font-bold text-gray-800 mt-auto"></h3>
                </div>
            </div>
 --> 





        <!-- </div> -->

        <!-- <div class="bg-white rounded-md px-4 py-6 h-max shadow-[0_2px_12px_-3px_rgba(6,81,237,0.3)]">
            <ul class="text-gray-800 space-y-4">
                <li class="flex flex-wrap gap-4 text-sm">Subtotal <span class="ml-auto font-bold">$200.00</span></li>
                <li class="flex flex-wrap gap-4 text-sm">Shipping <span class="ml-auto font-bold">$2.00</span></li>
                <li class="flex flex-wrap gap-4 text-sm">Tax <span class="ml-auto font-bold">$4.00</span></li>
                <hr class="border-gray-300" />
                <li class="flex flex-wrap gap-4 text-sm font-bold">Total <span class="ml-auto">$206.00</span></li>
            </ul>

            <div class="mt-8 space-y-2">
                <button type="button" class="text-sm px-4 py-2.5 w-full font-semibold tracking-wide bg-gray-800 hover:bg-gray-900 text-white rounded-md">Buy Now</button>
                <button type="button" class="text-sm px-4 py-2.5 w-full font-semibold tracking-wide bg-transparent hover:bg-gray-100 text-gray-800 border border-gray-300 rounded-md">Continue Shopping  </button>
            </div>

            <div class="mt-4 flex flex-wrap justify-center gap-4">
                <img src='https://readymadeui.com/images/master.webp' alt="card1" class="w-10 object-contain" />
                <img src='https://readymadeui.com/images/visa.webp' alt="card2" class="w-10 object-contain" />
                <img src='https://readymadeui.com/images/american-express.webp' alt="card3" class="w-10 object-contain" />
            </div>
        </div>
    </div>
</div>

 -->

<!-- <script> 
    let counter = parseInt(document.getElementById('qty-value').innerHTML);

    const qty = document.getElementById('qty-value');
    const incrementBtn = document.getElementById('increment-btn');
    const decrementBtn = document.getElementById('decrement-btn');

    // Increment the value of counter
    incrementBtn.addEventListener('click', () => {
        counter++;
        qty.innerHTML = counter;
    });

    // Decrement the value of counter
    decrementBtn.addEventListener('click', () => {
        if (counter > 0) { // Ensure the counter doesn't go below 1
            counter--;
            qty.innerHTML = counter;
        }
    }); 
 </script> -->





 <div class="font-sans max-w-4xl max-md:max-w-xl mx-auto p-4">
    <h1 class="text-2xl font-extrabold text-gray-800">Your Cart</h1>
    <% if(cart && cart.items. length >0) { %>
    <div class="grid md:grid-cols-3 gap-4 mt-8">
        <div class="md:col-span-2 space-y-4">
          

            <%cart.items.forEach((item)=>{ %>
            <div class="flex gap-4 bg-white px-4 py-6 rounded-md shadow-[0_2px_12px_-3px_rgba(6,81,237,0.3)]">
                
                <div class="flex gap-4">
                    <div class="w-28 h-28 max-sm:w-24 max-sm:h-24 shrink-0">
                        <img src='<%= item.productId.productImages[0] %>' class="w-full h-full object-contain" />
                    </div>

                    <div class="flex flex-col gap-4">
                        <div>
                            <h3 class="text-base font-bold text-gray-800"><%= item.productId.productName %></h3>
                            <p class="text-sm font-semibold text-gray-500 mt-2 flex items-center gap-2">Color: <span class="inline-block w-5 h-5 rounded-md <% if (item.productId.productColor === 'Brown') { %> bg-red-900 
                                <% } else if (item.productId.productColor === 'Blue') { %> bg-blue-800 
                                <% } else if (item.productId.productColor === 'Silver') { %> bg-slate-300 
                                <% } else if (item.productId.productColor === 'Black') { %> bg-slate-700
                                <% } else if (item.productId.productColor === 'Green') { %> bg-green-700 
                                <% } %>""></span></p>
                            <% if(item.productId.productDiscount > 0) { %>
                                <h3 class="text-black  font-semibold inline-block">
                                    <del>Rs. <%= item.productId.productPrice %></del>
                                    $ <%= item.productId.productPrice - (item.productId.productPrice * (item.productId.productDiscount / 100)) %>
                                </h3>
                                <h4 class="text-black text-xs max-sm:text-xs font-normal">Save <%= item.productId.productDiscount %> %</h4>
                            <% } else { %>
                                <h3 class="text-black font-semibold inline-block">
                                    $ <%= item.productId.productPrice %>
                                </h3>
                            <% } %>
                            <% if(item.productId.productQuantity<=0) { %>
                                <h4 class="text-red-500">Product is out of Stock</h4>
                            <% } %>

                        </div>

                     

                        <div class="flex items-center gap-3">
                            <!-- Decrement Button -->
                            <button type="button" 
                                class="flex items-center justify-center w-6 h-6 bg-red-400 text-white outline-none rounded-full"
                                onclick="decrementQuantity('<%= item.productId._id %>')" 
                                <%= (item.productCount <= 1) ? 'disabled' : '' %>>
                                -
                            </button>
                        
                            <!-- Display the quantity -->
                            <span class="font-bold text-sm leading-[18px]"><%= item.productCount %></span>
                        
                            <!-- Increment Button -->
                            <button type="button" 
                                class="flex items-center justify-center w-6 h-6 bg-red-400 text-white outline-none rounded-full"
                                onclick="incrementQuantity('<%= item.productId._id %>')"
                                <%= (item.productCount >= 4) ? 'disabled' : '' %>>
                                +
                            </button>
                        
                            <!-- Min/Max Quantity Warning -->
                            <% if (item.productCount <= 1 || item.productCount >= 4) { %>
                                <span class="text-sm">Min: 1 & Max: 4</span>
                            <% } %>
                        </div>
                        
                    </div>
                </div>
            
                <div class="ml-auto flex flex-col">
                    <div class="flex items-start gap-4 justify-end">
                      
                        <button><i class="fa-regular fa-heart"></i></button>
                        
                        <button onclick="deleteCartItem('<%= item.productId._id %>')"><i class="fa-solid fa-trash" style="color: #e30d23;"></i></button>

                     
                    </div>
                    <h3 class="text-base font-bold text-gray-800 mt-auto">$ <%= ((item.productId.productPrice - (item.productId.productPrice * (item.productId.productDiscount / 100)))*item.productCount).toFixed(2) %></h3>
                </div>
            </div>
          <% }) %>
      
            
        </div>

        <div class="bg-white rounded-md px-4 py-6 h-max shadow-[0_2px_12px_-3px_rgba(6,81,237,0.3)]">
            <ul class="text-gray-800 space-y-4">
                <div class="flex border border-slate-900 overflow-hidden rounded-md">
                    <input type="email" placeholder="Coupon code"
                        class="w-full outline-none bg-white text-gray-600 text-sm px-4 py-2.5" />
                    <button type='button' class="flex items-center justify-center font-semibold tracking-wide bg-black hover:bg-red-900 px-4 text-sm text-white">
                        Apply
                    </button>
                </div>
                <li class="flex flex-wrap gap-4 text-sm">Subtotal <span class="ml-auto font-bold">$<%=totalPriceWithoutDiscount.toFixed(2)%></span></li>
                <li class="flex flex-wrap gap-4 text-sm">Subtotal(with discount) <span class="ml-auto font-bold">$<%=totalPrice.toFixed(2)%></span></li>
                <li class="flex flex-wrap gap-4 text-sm">Shipping <span class="ml-auto font-bold"><%= cart.payablePrice > 1000 ? 'Free' : '$50' %></span></li>
                <!-- <li class="flex flex-wrap gap-4 text-sm">Tax <span class="ml-auto font-bold">$4.00</span></li> -->
                <hr class="border-gray-300" />
                <li class="flex flex-wrap gap-4 text-sm font-bold">Total <span class="ml-auto">$<%= cart.payablePrice.toFixed(2) %></span></li>
            </ul>

            <div class="mt-8 space-y-2">
                <a href="/user/checkout"><button type="button" class="text-sm px-4 py-2.5 w-full font-semibold tracking-wide bg-gray-800 hover:bg-gray-900 text-white rounded-md">Proceed to Checkout</button></a>
                <button type="button" class="text-sm px-4 py-2.5 w-full font-semibold tracking-wide bg-transparent hover:bg-gray-100 text-gray-800 border border-gray-300 rounded-md">Continue Shopping  </button>
            </div>

            <div class="mt-4 flex flex-wrap justify-center gap-4">
                <img src='https://readymadeui.com/images/master.webp' alt="card1" class="w-10 object-contain" />
                <img src='https://readymadeui.com/images/visa.webp' alt="card2" class="w-10 object-contain" />
                <img src='https://readymadeui.com/images/american-express.webp' alt="card3" class="w-10 object-contain" />
            </div>
        </div>
        <% } else{ %>
            <div class="m-5 p-3 text-center">
                <h3>Your cart is Empty</h3>
               <a href="/user/home"> <button type="button" class="text-sm px-4 py-2.5 w-full font-semibold tracking-wide bg-transparent hover:bg-gray-100 text-gray-800 border border-gray-300 rounded-md">Continue Shopping  </button></a>
        <% } %>


</div> 
</div>

<script>
    
function incrementQuantity(productId) {
    fetch(`/user/cart/increment/${productId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.message === 'Quantity incremented') {
            // Update the page or reload to reflect changes
            window.location.reload();  // Reload the page to update cart
        } else {
            alert('Failed to update quantity');
        }
    })
    .catch(error => {
        console.error('Error incrementing quantity:', error);
    });
}

function decrementQuantity(productId) {
    fetch(`/user/cart/decrement/${productId}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.message === 'Quantity decremented') {
            // Update the page or reload to reflect changes
            window.location.reload();  // Reload the page to update cart
        } else {
            alert('Failed to update quantity');
        }
    })
    .catch(error => {
        console.error('Error decrementing quantity:', error);
    });
}

    function deleteCartItem(productId) {
        fetch(`/user/addtocart/delete/${productId}`, {
            method: 'POST',  // Could also be 'DELETE', but 'POST' is fine too
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.message === 'Item deleted successfully') {
                // Refresh the page or update the cart dynamically to reflect the deleted item
                window.location.reload();  // This reloads the page to show the updated cart
            } else {
                alert('Failed to delete item from cart');
            }
        })
        .catch(error => {
            console.error('Error deleting item:', error);
            alert('Error deleting item from cart');
        });
    }
// function incrementQuantity(productId) {
//     fetch(`/user/cart/increment/${productId}`, {
//         method: 'POST',
//         headers: {
//             'Content-Type': 'application/json'
//         }
//     })
//     .then(response => response.json())
//     .then(data => {
//         if (data.message === 'Quantity incremented') {
//             // Find the element that displays the quantity and update it
//             const quantityElement = document.querySelector(`#quantity-${productId}`);
//             const newQuantity = parseInt(quantityElement.textContent) + 1;
//             quantityElement.textContent = newQuantity;

//             // Optionally, update the total price
//             updateCartTotal();
//         } else {
//             alert('Failed to update quantity');
//         }
//     })
//     .catch(error => {
//         console.error('Error incrementing quantity:', error);
//     });
// }
// function decrementQuantity(productId) {
//     fetch(`/user/cart/decrement/${productId}`, {
//         method: 'POST',
//         headers: {
//             'Content-Type': 'application/json'
//         }
//     })
//     .then(response => response.json())
//     .then(data => {
//         if (data.message === 'Quantity decremented') {
//             // Update the quantity on the page
//             const quantityElement = document.querySelector(`#quantity-${productId}`);
//             const newQuantity = parseInt(quantityElement.textContent) - 1;
//             if (newQuantity > 0) {
//                 quantityElement.textContent = newQuantity;
//             } else {
//                 deleteCartItem(productId); // Optional: remove item if quantity reaches 0
//             }

//             // Optionally, update the total price
//             updateCartTotal();
//         } else {
//             alert('Failed to update quantity');
//         }
//     })
//     .catch(error => {
//         console.error('Error decrementing quantity:', error);
//     });
// }

// function deleteCartItem(productId) {
//     fetch(`/user/addtocart/delete/${productId}`, {
//         method: 'POST',  // Could also be 'DELETE', but 'POST' is fine too
//         headers: {
//             'Content-Type': 'application/json'
//         }
//     })
//     .then(response => response.json())
//     .then(data => {
//         if (data.message === 'Item deleted successfully') {
//             // Remove the item from the DOM
//             const cartItemElement = document.querySelector(`#cart-item-${productId}`);
//             if (cartItemElement) {
//                 cartItemElement.remove();
//             }

//             // Optionally, update the total price
//             updateCartTotal();
//         } else {
//             alert('Failed to delete item from cart');
//         }
//     })
//     .catch(error => {
//         console.error('Error deleting item:', error);
//         alert('Error deleting item from cart');
//     });
// }

// function updateCartTotal() {
//     let total = 0;
//     document.querySelectorAll('.cart-item').forEach(item => {
//         const price = parseFloat(item.querySelector('.item-price').textContent);
//         const quantity = parseInt(item.querySelector('.item-quantity').textContent);
//         total += price * quantity;
//     });
//     document.querySelector('#cart-total').textContent = total.toFixed(2);  // Update total price in DOM
// }

    </script>